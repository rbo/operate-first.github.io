{"componentChunkName":"component---src-templates-jupyter-notebook-js","path":"/data-science/ocp-ci-analysis/notebooks/data-sources/TestGrid/metrics/validate_pipeline.ipynb","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"jupyterNotebook":{"id":"8a746fa6-633e-5aa1-b807-baffe384ad41 >>> JupyterNotebook","html":"<div class=\"notebook-render\"><div class=\"sc-ifAKCX zMCZx\"><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-iwsKbI exQuEV markdown\"><h1>Validate the succesful running of the Automated Pipeline</h1></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-iwsKbI exQuEV markdown\"><p>Successful running of a pipeline should collected raw data and metrics in the project S3 bucket.\nThis notebook is a simple utlity notebook to check the contents of the S3 bucket and validate that the automated pipeline ran succesfully.</p></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[10]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#0000ff\">import</span> os\n<span class=\"token\" style=\"color:#0000ff\">import</span> datetime\n<span class=\"token\" style=\"color:#0000ff\">from</span> dotenv <span class=\"token\" style=\"color:#0000ff\">import</span> load_dotenv<span class=\"token\" style=\"color:#393A34\">,</span> find_dotenv\n<span class=\"token\" style=\"color:#0000ff\">from</span> ipynb<span class=\"token\" style=\"color:#393A34\">.</span>fs<span class=\"token\" style=\"color:#393A34\">.</span>defs<span class=\"token\" style=\"color:#393A34\">.</span>metric_template <span class=\"token\" style=\"color:#0000ff\">import</span> CephCommunication</code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[11]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">load_dotenv<span class=\"token\" style=\"color:#393A34\">(</span>find_dotenv<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>True</span></code></pre></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[12]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">s3_endpoint_url <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>getenv<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;S3_ENDPOINT&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\ns3_access_key <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>getenv<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;S3_ACCESS_KEY&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\ns3_secret_key <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>getenv<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;S3_SECRET_KEY&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\ns3_bucket <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>getenv<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;S3_BUCKET&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[13]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">s3_bucket</code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>&#x27;opf-datacatalog&#x27;</span></code></pre></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[14]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">cc <span class=\"token\" style=\"color:#393A34\">=</span> CephCommunication<span class=\"token\" style=\"color:#393A34\">(</span>s3_endpoint_url<span class=\"token\" style=\"color:#393A34\">,</span> s3_access_key<span class=\"token\" style=\"color:#393A34\">,</span> s3_secret_key<span class=\"token\" style=\"color:#393A34\">,</span> s3_bucket<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[15]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">bucket <span class=\"token\" style=\"color:#393A34\">=</span> cc<span class=\"token\" style=\"color:#393A34\">.</span>s3_resource<span class=\"token\" style=\"color:#393A34\">.</span>Bucket<span class=\"token\" style=\"color:#393A34\">(</span>s3_bucket<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[16]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># check all .parquet files in S3</span>\nobjects <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span>i <span class=\"token\" style=\"color:#0000ff\">for</span> i <span class=\"token\" style=\"color:#0000ff\">in</span> bucket<span class=\"token\" style=\"color:#393A34\">.</span>objects<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">all</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token\" style=\"color:#A31515\">&quot;parquet&quot;</span> <span class=\"token\" style=\"color:#0000ff\">in</span> i<span class=\"token\" style=\"color:#393A34\">.</span>key<span class=\"token\" style=\"color:#393A34\">]</span>\n<span class=\"token builtin\">sorted</span><span class=\"token\" style=\"color:#393A34\">(</span>objects<span class=\"token\" style=\"color:#393A34\">,</span> key<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> x<span class=\"token\" style=\"color:#393A34\">.</span>key<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>[s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;None/consec_fail_stats_df.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;None/pct_fixed_per_ts.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/avg_correlation/avg_correlation-2021-4-14.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/avg_correlation/avg_correlation-2021-4-16.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/avg_correlation/avg_correlation-2021-4-19.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/avg_correlation/avg_correlation-2021-4-29.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/avg_correlation/avg_correlation-2021-5-3.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/blocked_timed_out/blocked_timed_out-2021-4-14.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/blocked_timed_out/blocked_timed_out-2021-4-16.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/blocked_timed_out/blocked_timed_out-2021-4-19.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/blocked_timed_out/blocked_timed_out-2021-4-27.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/blocked_timed_out/blocked_timed_out-2021-5-3.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/build_pass_failure/build_pass_failure-2021-4-14.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/build_pass_failure/build_pass_failure-2021-4-16.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/build_pass_failure/build_pass_failure-2021-4-19.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/build_pass_failure/build_pass_failure-2021-5-3.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/correlation/correlation-2021-4-14.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/correlation/correlation-2021-4-16.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/correlation/correlation-2021-4-19.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/correlation/correlation-2021-4-29.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/correlation/correlation-2021-5-3.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/flake.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/number_of_flakes/number_of_flakes-2021-4-14.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/number_of_flakes/number_of_flakes-2021-4-16.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/number_of_flakes/number_of_flakes-2021-4-19.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/number_of_flakes/number_of_flakes-2021-4-27.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/number_of_flakes/number_of_flakes-2021-4-29.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/number_of_flakes/number_of_flakes-2021-5-3.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/number_of_flakes/number_of_flakes-2021-5-4.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/pct_fixed_each_ts/pct_fixed_each_ts-2021-4-14.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/pct_fixed_each_ts/pct_fixed_each_ts-2021-4-16.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/pct_fixed_each_ts/pct_fixed_each_ts-2021-4-19.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/pct_fixed_each_ts/pct_fixed_each_ts-2021-4-27.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/pct_fixed_each_ts/pct_fixed_each_ts-2021-5-3.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/persistent_failures/persistent_failures-2021-4-14.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/persistent_failures/persistent_failures-2021-4-16.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/persistent_failures/persistent_failures-2021-4-19.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/persistent_failures/persistent_failures-2021-4-27.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/persistent_failures/persistent_failures-2021-4-28.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/persistent_failures/persistent_failures-2021-4-29.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/persistent_failures/persistent_failures-2021-5-3.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/persistent_failures/persistent_failures-2021-5-4.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/test_pass_failures/test_pass_failures-2021-4-14.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/test_pass_failures/test_pass_failures-2021-4-16.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/test_pass_failures/test_pass_failures-2021-4-19.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/test_pass_failures/test_pass_failures-2021-4-27.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/test_pass_failures/test_pass_failures-2021-4-29.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/test_pass_failures/test_pass_failures-2021-5-3.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/time_to_test/time_to_test-2021-4-14.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/time_to_test/time_to_test-2021-4-16.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/time_to_test/time_to_test-2021-4-19.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/time_to_test/time_to_test-2021-4-27.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/time_to_test/time_to_test-2021-4-29.parquet&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;metrics/time_to_test/time_to_test-2021-5-3.parquet&#x27;)]</span></code></pre></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[17]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># check all raw data files in s3</span>\nobjects <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span>i <span class=\"token\" style=\"color:#0000ff\">for</span> i <span class=\"token\" style=\"color:#0000ff\">in</span> bucket<span class=\"token\" style=\"color:#393A34\">.</span>objects<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">all</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token\" style=\"color:#A31515\">&quot;raw_data/&quot;</span> <span class=\"token\" style=\"color:#0000ff\">in</span> i<span class=\"token\" style=\"color:#393A34\">.</span>key<span class=\"token\" style=\"color:#393A34\">]</span>\n<span class=\"token builtin\">sorted</span><span class=\"token\" style=\"color:#393A34\">(</span>objects<span class=\"token\" style=\"color:#393A34\">,</span> key<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> x<span class=\"token\" style=\"color:#393A34\">.</span>key<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>[s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;raw_data/testgrid_144.json&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;raw_data/testgrid_164.json&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;raw_data/testgrid_194.json&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;raw_data/testgrid_274.json&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;raw_data/testgrid_284.json&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;raw_data/testgrid_294.json&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;raw_data/testgrid_35.json&#x27;),\n s3.ObjectSummary(bucket_name=&#x27;opf-datacatalog&#x27;, key=&#x27;raw_data/testgrid_45.json&#x27;)]</span></code></pre></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-iwsKbI exQuEV markdown\"><h3>Check for today&#x27;s data on S3</h3></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[18]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># modify variables for custom date</span>\ntimestamp <span class=\"token\" style=\"color:#393A34\">=</span> datetime<span class=\"token\" style=\"color:#393A34\">.</span>datetime<span class=\"token\" style=\"color:#393A34\">.</span>today<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[19]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">metric_name <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>timestamp<span class=\"token\" style=\"color:#393A34\">.</span>year<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">-</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>timestamp<span class=\"token\" style=\"color:#393A34\">.</span>month<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">-</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>timestamp<span class=\"token\" style=\"color:#393A34\">.</span>day<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">.parquet&quot;</span></span>\nraw_data <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;testgrid_</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>timestamp<span class=\"token\" style=\"color:#393A34\">.</span>day<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>timestamp<span class=\"token\" style=\"color:#393A34\">.</span>month<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">.json&quot;</span></span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[20]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">metric_objects <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span>i <span class=\"token\" style=\"color:#0000ff\">for</span> i <span class=\"token\" style=\"color:#0000ff\">in</span> bucket<span class=\"token\" style=\"color:#393A34\">.</span>objects<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">all</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">if</span> metric_name <span class=\"token\" style=\"color:#0000ff\">in</span> i<span class=\"token\" style=\"color:#393A34\">.</span>key<span class=\"token\" style=\"color:#393A34\">]</span>\n<span class=\"token builtin\">sorted</span><span class=\"token\" style=\"color:#393A34\">(</span>metric_objects<span class=\"token\" style=\"color:#393A34\">,</span> key<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> x<span class=\"token\" style=\"color:#393A34\">.</span>key<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>[]</span></code></pre></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[21]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">raw_data_objects <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span>i <span class=\"token\" style=\"color:#0000ff\">for</span> i <span class=\"token\" style=\"color:#0000ff\">in</span> bucket<span class=\"token\" style=\"color:#393A34\">.</span>objects<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">all</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">if</span> raw_data <span class=\"token\" style=\"color:#0000ff\">in</span> i<span class=\"token\" style=\"color:#393A34\">.</span>key<span class=\"token\" style=\"color:#393A34\">]</span>\n<span class=\"token builtin\">sorted</span><span class=\"token\" style=\"color:#393A34\">(</span>raw_data_objects<span class=\"token\" style=\"color:#393A34\">,</span> key<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> x<span class=\"token\" style=\"color:#393A34\">.</span>key<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>[]</span></code></pre></div></div></div></div></div>","fields":{"srcLink":"https://github.com/aicoe-aiops/ocp-ci-analysis/blob/master/notebooks/data-sources/TestGrid/metrics/validate_pipeline.ipynb"}}},"pageContext":{"id":"8a746fa6-633e-5aa1-b807-baffe384ad41 >>> JupyterNotebook"}},"staticQueryHashes":["117426894","3000541721","3606484676","533861647"]}