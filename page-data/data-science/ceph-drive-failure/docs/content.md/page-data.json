{"componentChunkName":"component---src-templates-markdown-js","path":"/data-science/ceph-drive-failure/docs/content.md","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"08285df5-ac41-5b36-99d9-c7447b204979","html":"<h1 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h1>\n<p>This project consists of the following main workstreams:</p>\n<ul class=\"pf-c-list\">\n<li>\n<p><a href=\"#hard-drive-failure-prediction\">Hard Drive Failure Prediction</a></p>\n<ul class=\"pf-c-list\">\n<li><a href=\"#Data-Exploration\">Data Exploration</a></li>\n<li><a href=\"#Data-Cleaning\">Data Cleaning</a></li>\n<li><a href=\"#Model-Training\">Model Training</a></li>\n<li><a href=\"#End-To-End-Pipeline\">End-To-End Pipeline</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#smart-metric-forecasting\">SMART Metric Forecasting</a></p>\n<ul class=\"pf-c-list\">\n<li><a href=\"#Univariate-Models\">Univariate Models</a></li>\n<li><a href=\"#Multivariate-Models\">Multivariate Models</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#alternate-dataset-explorations\">Alternate Dataset Explorations</a></p>\n<ul class=\"pf-c-list\">\n<li><a href=\"#Ceph-Telemetry-Dataset\">Ceph Telemetry Dataset</a></li>\n<li><a href=\"#FAST-Dataset\">FAST Dataset</a></li>\n</ul>\n</li>\n<li><a href=\"#disk-health-predictor-library\">Disk Health Predictor Library</a></li>\n</ul>\n<h1 id=\"hard-drive-failure-prediction\" style=\"position:relative;\"><a href=\"#hard-drive-failure-prediction\" aria-label=\"hard drive failure prediction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hard Drive Failure Prediction</h1>\n<p>In this workstream, we address the primary objective of the project i.e. creating disk failure prediction models using open source datasets. Specifically, we train classification models to classify a given disk’s health into one of three categories - <code class=\"language-text\">good</code> (>6 weeks till failure), <code class=\"language-text\">warning</code> (2-6 weeks till failure), and <code class=\"language-text\">bad</code> (&#x3C;2 weeks till failure). These disk health categories were defined this way to be consistent with the <a href=\"https://github.com/ceph/ceph/blob/f8f7b865715987139d96e4baf41c82329dc19108/src/pybind/mgr/diskprediction_local/module.py#L271\">existing setup in Ceph</a> provided by <a href=\"https://www.prophetstor.com/diskprophet/\">DiskProphet</a>, a disk health prediction solution from ProphetStor. The input for these models is 6 days of <a href=\"https://en.wikipedia.org/wiki/S.M.A.R.T.\">SMART</a> data, which was also a design choice made to be compatible with the <a href=\"https://github.com/ceph/ceph/blob/f8f7b865715987139d96e4baf41c82329dc19108/src/pybind/mgr/diskprediction_local/module.py#L151\">existing setup</a>.</p>\n<p>The data used for training the models is the <a href=\"https://www.backblaze.com/b2/hard-drive-test-data.html\">Backblaze</a> dataset. It consists of SMART data collected daily from the hard disk drives in the Backblaze datacenter, along with a label indicating whether or not the drive was considered failed.</p>\n<p>The following notebooks were created as a part of this workstream:</p>\n<h2 id=\"data-exploration\" style=\"position:relative;\"><a href=\"#data-exploration\" aria-label=\"data exploration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Exploration</h2>\n<ul class=\"pf-c-list\">\n<li><a href=\"../notebooks/data_sources/backblaze/step0_smartctl_json_db_format_finder.ipynb\"><code class=\"language-text\">smartctl_json_db_format_finder</code></a>: Understand the structure of json outpu by the <code class=\"language-text\">smartctl</code> tool.</li>\n<li><a href=\"../notebooks/data_sources/backblaze/step0_smartctl_json_db_to_df.ipynb\"><code class=\"language-text\">smartctl_json_db_to_df</code></a>: Convert a nested <code class=\"language-text\">smartctl</code> json to a pandas dataframe.</li>\n<li><a href=\"../notebooks/data_sources/backblaze/step1_data_explorer.ipynb\"><code class=\"language-text\">data_explorer</code></a>: Explore the contents and salient properties of the Backblaze dataset.</li>\n</ul>\n<h2 id=\"data-cleaning\" style=\"position:relative;\"><a href=\"#data-cleaning\" aria-label=\"data cleaning permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Cleaning:</h2>\n<ul class=\"pf-c-list\">\n<li><a href=\"../notebooks/data_sources/backblaze/step2a_data_cleaner_seagate.ipynb\"><code class=\"language-text\">data_cleaner_seagate</code></a>: Clean data available for seagate disks.</li>\n<li><a href=\"../notebooks/data_sources/backblaze/step2b_data_cleaner_hgst.ipynb\"><code class=\"language-text\">data_cleaner_hgst</code></a>: Clean data available for hgst disks.</li>\n</ul>\n<h2 id=\"model-training\" style=\"position:relative;\"><a href=\"#model-training\" aria-label=\"model training permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Model Training:</h2>\n<ul class=\"pf-c-list\">\n<li><a href=\"../notebooks/data_sources/backblaze/step3a_clustering_and_binaryclf.ipynb\"><code class=\"language-text\">clustering_and_binaryclf</code></a>: Explore clustering models and binary pass/fail classifiers.</li>\n<li><a href=\"../notebooks/data_sources/backblaze/step3b_ternary_clf.ipynb\"><code class=\"language-text\">ternary_clf</code></a>: Explore ternary classifiers, i.e. models that classify disk health into “good”, “warning”, and “bad” as described above.</li>\n</ul>\n<h2 id=\"end-to-end-pipeline\" style=\"position:relative;\"><a href=\"#end-to-end-pipeline\" aria-label=\"end to end pipeline permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>End-To-End Pipeline:</h2>\n<ul class=\"pf-c-list\">\n<li><a href=\"../notebooks/data_sources/backblaze/kaggle_seagate_end2end.ipynb\"><code class=\"language-text\">kaggle_seagate_end2end</code></a>: Entire ML pipeline, starting from data cleaning to feature engineering to model training, for seagate disks. Combines the results from each notebook in the above sections.</li>\n<li><a href=\"../notebooks/data_sources/backblaze/kaggle_hgst_end2end.ipynb.ipynb\"><code class=\"language-text\">kaggle_hgst_end2end</code></a>: Entire ML pipeline, starting from data cleaning to feature engineering to model training, for hgst disks. Combines the results from each notebook in the above sections.</li>\n</ul>\n<h1 id=\"smart-metric-forecasting\" style=\"position:relative;\"><a href=\"#smart-metric-forecasting\" aria-label=\"smart metric forecasting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SMART Metric Forecasting</h1>\n<p>The goal of this workstream is to create models that can forecast the values of individual SMART metrics into the near future. The idea here is that these forecasting models could be used in tandem with the disk health classifier models from above. Together, they can provide a more granular and detailed insight into what specific component is likely to fail for a given disk. Based on this information, the storage system operator or subject matter expert can manually decide whether or not to remove a hard disk drive from the storage cluster or datacenter, based on their unique failure tolerance level.</p>\n<h2 id=\"univariate-models\" style=\"position:relative;\"><a href=\"#univariate-models\" aria-label=\"univariate models permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Univariate Models</h2>\n<p>In this initial setup, we treat each SMART metric as an independent variable to forecast. That is, we train univariate forecasting models for each (significant) SMART metric.</p>\n<ul class=\"pf-c-list\">\n<li><a href=\"../notebooks/experimental/forecast_smart_metrics.ipynb\">Notebook</a></li>\n</ul>\n<h2 id=\"multivariate-models\" style=\"position:relative;\"><a href=\"#multivariate-models\" aria-label=\"multivariate models permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multivariate Models</h2>\n<p>In this subsequent setup, we take into account the interactions between various SMART metrics. That is, we train multivariate forecasting models to predict how all the SMART metric values will change together in the near future.</p>\n<ul class=\"pf-c-list\">\n<li><a href=\"../notebooks/experimental/multivariate_forecast_smart_metrics.ipynb\">Notebook</a></li>\n</ul>\n<h1 id=\"alternate-dataset-explorations\" style=\"position:relative;\"><a href=\"#alternate-dataset-explorations\" aria-label=\"alternate dataset explorations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Alternate Dataset Explorations</h1>\n<p>Most of the work done in this project is based on the Backblaze dataset since it was the only large, publicly available, and well-curated dataset at the time. However, since this data is collected from just one company with a specific usage (backup), it might not be able to capture the various usage patterns of real Ceph users. Fortunately, there have been other recent efforts in academia and industry towards collecting more detailed disk health data, that help create better disk failure prediction models. Of these data sources, we investigate the following two in this workstream.</p>\n<h2 id=\"ceph-telemetry-dataset\" style=\"position:relative;\"><a href=\"#ceph-telemetry-dataset\" aria-label=\"ceph telemetry dataset permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ceph Telemetry Dataset</h2>\n<p>The Ceph team has been collecting anonymized SMART metrics from their users. We have worked with them to make this data publicly available. Furthermore, we have created an exploratory notebook that walks you through accessing this data, highlights the main features of this data, and compares it with the Backblaze dataset.</p>\n<ul class=\"pf-c-list\">\n<li><a href=\"https://kzn-swift.massopen.cloud/swift/v1/devicehealth/\">Ceph Telemetry Data</a></li>\n<li><a href=\"../notebooks/data_sources/telemetry/step0_EDA.ipynb\">Walkthrough notebook</a></li>\n</ul>\n<h2 id=\"fast-dataset\" style=\"position:relative;\"><a href=\"#fast-dataset\" aria-label=\"fast dataset permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FAST Dataset</h2>\n<p>Recent <a href=\"http://codegreen.cs.wayne.edu/wizard/#Publication\">research</a> suggests that incorporating disk performance and disk location data with SMART metrics can be valuable in analyzing disk health. Specifically, <a href=\"https://www.usenix.org/conference/fast20/presentation/lu\">this</a> paper claims to achieve improvements in disk failure prediction models, when using these additional features. In this effort, we explore the FAST dataset and evaluate the tradeoffs between model performance gain and overhead of collecting additional metrics from users.</p>\n<ul class=\"pf-c-list\">\n<li>Exploratory notebook (forthcoming)</li>\n</ul>\n<h1 id=\"disk-health-predictor-library\" style=\"position:relative;\"><a href=\"#disk-health-predictor-library\" aria-label=\"disk health predictor library permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disk Health Predictor Library</h1>\n<p>The goal of this workstream is to create an open source python module containing the models trained in this project. The goal is to make these models easily accessible and usable by everyone, not just Ceph users. This way, anyone can run inference on their own storage system using the models built in this project.</p>","fields":{"srcLink":"https://github.com/aicoe-aiops/ceph_drive_failure/blob/master/docs/content.md"},"frontmatter":{"title":"","description":null,"extraClasses":null}}},"pageContext":{"id":"08285df5-ac41-5b36-99d9-c7447b204979"}},"staticQueryHashes":["117426894","3000541721","3606484676","533861647"]}