{"componentChunkName":"component---src-templates-markdown-js","path":"/users/sre/runbooks/kafka.md","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"3c77ce5d-edbd-55a0-a673-4d628192565e","html":"<h1 id=\"kafka-runbook\" style=\"position:relative;\"><a href=\"#kafka-runbook\" aria-label=\"kafka runbook permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka Runbook</h1>\n<h2 id=\"key-locations\" style=\"position:relative;\"><a href=\"#key-locations\" aria-label=\"key locations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Key Locations</h2>\n<table class=\"pf-c-table\">\n<thead>\n<tr>\n<th>Env</th>\n<th>Namespace</th>\n<th>GitHub Repo</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>MOC-ZERO Prod</td>\n<td><a href=\"https://console-openshift-console.apps.zero.massopen.cloud/k8s/cluster/projects/opf-kafka\">opf-kafka</a></td>\n<td><a href=\"https://github.com/operate-first/apps/tree/master/odh/overlays/moc/zero/kafka\">https://github.com/operate-first/apps/tree/master/odh/overlays/moc/zero/kafka</a></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"contact-for-additional-help\" style=\"position:relative;\"><a href=\"#contact-for-additional-help\" aria-label=\"contact for additional help permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contact for Additional Help</h2>\n<ul class=\"pf-c-list\">\n<li>Strimzi Team - <a href=\"https://slack.cncf.io/\">https://slack.cncf.io/</a></li>\n<li>Internal Data Hub Team - data-hub@redhat.com</li>\n</ul>\n<h2 id=\"dashboards\" style=\"position:relative;\"><a href=\"#dashboards\" aria-label=\"dashboards permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dashboards</h2>\n<p>Links to the monitoring dashboards for this service.</p>\n<table class=\"pf-c-table\">\n<thead>\n<tr>\n<th>Dashboard Description</th>\n<th>Dashboard URL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Kafka Overview</td>\n<td><a href=\"https://grafana-route-opf-monitoring.apps.zero.massopen.cloud/d/80de0e219205a33a2d87820f1ce335b6805ddbfc/kafka-overview?orgId=1\">https://grafana-route-opf-monitoring.apps.zero.massopen.cloud/d/80de0e219205a33a2d87820f1ce335b6805ddbfc/kafka-overview?orgId=1</a></td>\n</tr>\n</tbody>\n</table>\n<p>Some items to take note of:</p>\n<table class=\"pf-c-table\">\n<thead>\n<tr>\n<th>Metric</th>\n<th>Purpose</th>\n<th>Desired Value</th>\n<th>Action if out of desired range</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Brokers online</td>\n<td>The number of kafka brokers active in the cluster</td>\n<td>This should match whatever number is configured in Git for the cluster size (currently 3)</td>\n<td>Check kafka broker pods for restarts or pod logs for signs of error</td>\n</tr>\n<tr>\n<td>Under replicated partitions</td>\n<td>The number of kafka partitions that don’t have replicas fully in sync</td>\n<td>0</td>\n<td>Check kafka broker pod logs for signs of errors</td>\n</tr>\n<tr>\n<td>Offline partitions count</td>\n<td>The number of kafka partitions that don’t have any replicas online</td>\n<td>0</td>\n<td>Check for offline Kafka brokers. Check for kafka topics that don’t have replication fully enabled.</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"prerequisites\" style=\"position:relative;\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h2>\n<p>You will need cluster admin to access <code class=\"language-text\">openshift-operators</code> and need to be in the <code class=\"language-text\">operate-first</code> ocp group to access <code class=\"language-text\">opf-kafka</code> namespace.</p>\n<h2 id=\"deployment\" style=\"position:relative;\"><a href=\"#deployment\" aria-label=\"deployment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deployment</h2>\n<p>Our Kafka instance is managed by the Open Data Hub operator.</p>\n<h2 id=\"kafka-topology\" style=\"position:relative;\"><a href=\"#kafka-topology\" aria-label=\"kafka topology permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka Topology</h2>\n<p>There are several different types of pods associated with our Kafka deployment.\nThey are as follows:</p>\n<table class=\"pf-c-table\">\n<thead>\n<tr>\n<th>Pods</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://console-openshift-console.apps.zero.massopen.cloud/k8s/ns/openshift-operators/pods/strimzi-cluster-operator-v0.19.0-7c78d4cc-m654p\">Strimzi cluster operator</a></td>\n<td>This is the main Strimzi operator pod. It orchestrates all other pods and resides in the <code class=\"language-text\">openshift-operators</code> namespace.</td>\n</tr>\n<tr>\n<td><a href=\"https://console-openshift-console.apps.zero.massopen.cloud/k8s/ns/opf-kafka/statefulsets/odh-message-bus-zookeeper\">Zookeeper</a></td>\n<td>Zookeper performs controller election, cluster membership and maintain a list of all topics and configurations for the kafka brokers.</td>\n</tr>\n<tr>\n<td>Kafka Brokers</td>\n<td>Kafka brokers handle and store the topic log partitions and services the consumers and producers. These are deployed and managed by the Strimzi Operator.</td>\n</tr>\n<tr>\n<td>Kafka Connect</td>\n<td>Kafka connect utilizes various connectors to connect the Kafka cluster to a variety of data sources and streams. These are deployed and managed by the Strimzi Operator.</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"kafka-admin-scripts\" style=\"position:relative;\"><a href=\"#kafka-admin-scripts\" aria-label=\"kafka admin scripts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka Admin Scripts</h2>\n<p>Kafka comes pre bundled with a number of administrative scripts. These are\nlocated on each of the Kafka broker pods in the <code class=\"language-text\">/opt/kafka/bin/</code>\ndirectory. Some particularly useful scrips are as follows:</p>\n<table class=\"pf-c-table\">\n<thead>\n<tr>\n<th>Script</th>\n<th>Use</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">kafka-topics.sh</code></td>\n<td>View topics in the cluster, information about a specific topic, create a topic, etc.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">kafka-consumer-groups.sh</code></td>\n<td>View statistics about a consumer group</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">kafka-console-producer.sh</code></td>\n<td>Manually produce messages onto a topic</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">kafka-console-consumer.sh</code></td>\n<td>Manually consume messages from a topic</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">kafka-reassign-partitions.sh</code></td>\n<td>Manually reassign partitions of a topic to a different broker node</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">kafka-log-dirs.sh</code></td>\n<td>Query log directory usage on the specified brokers</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"smoke-test\" style=\"position:relative;\"><a href=\"#smoke-test\" aria-label=\"smoke test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Smoke Test</h2>\n<p>Some steps to take to ensure that the Kafka cluster is performing as expected\nare as follows. These all require rsh’ing into a Kafka broker pod and\nrunning the above admin scripts.</p>\n<h3 id=\"ensure-kafka-topics-exist\" style=\"position:relative;\"><a href=\"#ensure-kafka-topics-exist\" aria-label=\"ensure kafka topics exist permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ensure kafka topics exist</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/opt/kafka/bin/kafka-topics.sh --zookeeper localhost --list</code></pre></div>\n<p>If topics are not listed, something is wrong.</p>\n<h3 id=\"ensure-kafka-consumer-groups\" style=\"position:relative;\"><a href=\"#ensure-kafka-consumer-groups\" aria-label=\"ensure kafka consumer groups permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ensure kafka consumer groups</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/opt/kafka/bin/kafka-consumer-groups.sh --bootstrap-server three-kafka-bootstrap:9092 --list</code></pre></div>\n<p>If no consumer groups are listed, something is wrong.</p>\n<h3 id=\"check-consumer-group-lag\" style=\"position:relative;\"><a href=\"#check-consumer-group-lag\" aria-label=\"check consumer group lag permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Check consumer group lag</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/opt/kafka/bin/kafka-consumer-groups.sh --bootstrap-server three-kafka-bootstrap:9092 --describe --group $NAME</code></pre></div>\n<p>You will need to replace $NAME with the name of a particular consumer group. If the\ngroup lag is large and growing, something may be wrong.</p>\n<h2 id=\"common-debugging-steps\" style=\"position:relative;\"><a href=\"#common-debugging-steps\" aria-label=\"common debugging steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Common Debugging Steps</h2>\n<h3 id=\"topic-partition-reassignment\" style=\"position:relative;\"><a href=\"#topic-partition-reassignment\" aria-label=\"topic partition reassignment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Topic partition reassignment</h3>\n<p>From time to time we may need to manually reassign Kafka topic partitions.\nThis may be done if disk space consumption across the Kafka brokers becomes\nunbalanced. In theory this should not happen since all of our Kafka topics\nare replicated across all brokers. To perform a rebalance, you first need\nto create a <code class=\"language-text\">topics-to-move.json</code> file listing which topics to move. The format\nof the file should be as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  &quot;topics&quot;: [\n    {&quot;topic&quot;: &quot;dynamic-exd-meteor&quot;},\n    {&quot;topic&quot;: &quot;dh-test&quot;}\n  ],\n  &quot;version&quot;:1\n}</code></pre></div>\n<p>You can then auto-generate a recommended balanced allocation of the topics\nlisted by running the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/opt/kafka/bin/kafka-reassign-partitions.sh \\\n  --bootstrap-server three-kafka-bootstrap:9092 \\\n  --generate \\\n  --zookeeper localhost:2181 \\\n  --broker-list 0,1,2,3,4 \\\n  --topics-to-move-json-file /tmp/topics-to-move.json \\\n  &gt; /tmp/reassignment.json</code></pre></div>\n<p>Inspect the <code class=\"language-text\">/tmp/reassignment.json</code> file to ensure that the recommended\nallocation seems sane, then to apply it, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/opt/kafka/bin/kafka-reassign-partitions.sh \\\n  --bootstrap-server three-kafka-bootstrap:9092 \\\n  --execute \\\n  --zookeeper localhost:2181 \\\n  --broker-list 0,1,2,3,4 \\\n  --topics-to-move-json-file /tmp/topics-to-move.json \\\n  --reassignment-json-file /tmp/reassignment.json</code></pre></div>\n<p>You may also need to do this to decrease the replication factor.</p>","fields":{"srcLink":"https://github.com/operate-first/SRE/blob/master/runbooks/kafka.md"},"frontmatter":{"title":"","description":null,"extraClasses":null}}},"pageContext":{"id":"3c77ce5d-edbd-55a0-a673-4d628192565e"}},"staticQueryHashes":["117426894","3000541721","3606484676","533861647"]}