{"componentChunkName":"component---src-templates-markdown-js","path":"/users/elyra/docs/source/model-deployment/flask-application.md","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"41eab3eb-57c5-5a1b-a1c9-d637da888ba1","html":"<h1 id=\"deploy-your-model-as-a-flask-application\" style=\"position:relative;\"><a href=\"#deploy-your-model-as-a-flask-application\" aria-label=\"deploy your model as a flask application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy your model as a Flask application</h1>\n<h2 id=\"create-your-flask-app\" style=\"position:relative;\"><a href=\"#create-your-flask-app\" aria-label=\"create your flask app permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create your Flask app</h2>\n<p>Once you’ve trained your model and it’s stored on Ceph, you can start working on an inference application to make your model available for use by others.</p>\n<p>For the purpose of this tutorial you can reuse the <a href=\"../../../wsgi.py\">application</a> created with Flask. This app exposes some useful endpoints for serving and monitoring our model (e.g <code class=\"language-text\">/predict</code> and <code class=\"language-text\">/metrics</code>).</p>\n<h3 id=\"1-make-a-new-release\" style=\"position:relative;\"><a href=\"#1-make-a-new-release\" aria-label=\"1 make a new release permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Make a new release</h3>\n<p><a href=\"../build-images.md\">Create a new release and build the image</a></p>\n<h3 id=\"2-deploy-your-application\" style=\"position:relative;\"><a href=\"#2-deploy-your-application\" aria-label=\"2 deploy your application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Deploy your application</h3>\n<h4 id=\"requirements\" style=\"position:relative;\"><a href=\"#requirements\" aria-label=\"requirements permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Requirements</strong></h4>\n<ul class=\"pf-c-list\">\n<li>Image Name: <code class=\"language-text\">quay.io/thoth-station/elyra-aidevsecops-tutorial:v0.5.0</code></li>\n<li><a href=\"../../../manifests/base/deploymentconfig.yaml\">DeploymentConfig</a></li>\n<li><a href=\"../../../manifests/base/route.yaml\">Route</a></li>\n<li><a href=\"../../../manifests/base/service.yaml\">Service</a></li>\n</ul>\n<h4 id=\"using-operate-first-with-argocd\" style=\"position:relative;\"><a href=\"#using-operate-first-with-argocd\" aria-label=\"using operate first with argocd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Using Operate First with ArgoCD</strong></h4>\n<p><a href=\"https://argoproj.github.io/argo-cd/\">ArgoCD</a> is a tool used for Continuous Deployment of applications and is available for use on the Operate First. You can make a request to the Operate First team to use ArgoCD for your application.</p>\n<p>There are two steps you need to follow in order to have a new application deployed on <a href=\"https://www.operate-first.cloud/\">Operate First</a>:</p>\n<ol class=\"pf-c-list\">\n<li>Create all the manifests for your project (e.g. deployment, service, routes, workflows, pipelines) and place them in your repo under <code class=\"language-text\">/manifests</code>.</li>\n<li>Submit an issue to <a href=\"https://github.com/operate-first/support/issues/new?assignees=&#x26;labels=onboarding&#x26;template=onboarding_argocd.md&#x26;title=\">operate-first/support</a> to request deployment of your application.</li>\n</ol>\n<p>This way <a href=\"https://argoproj.github.io/argo-cd/\">ArgoCD</a> will be used to maintain your application and keep it in sync with all of your current changes. Once you create a new release of your application (e.g. you change your model, you add a new metric, you add a new feature, etc.) and a new image is available, all you need to do is update the <a href=\"../../../manifests/overlays/test/imagestreamtag.yaml#L10\">imagestreamtag</a> so that ArgoCD can deploy new version.</p>\n<p>Note: An <a href=\"https://github.com/AICoE/aicoe-ci\">AICoE Pipeline</a> can also automatically update the <a href=\"../../../manifests/overlays/test/imagestreamtag.yaml#L10\">imagestreamtag</a> once a new release is created.</p>\n<p>Once everything is synced to the cluster, you can monitor your application from the <a href=\"https://argoproj.github.io/argo-cd/\">ArgoCD</a> UI using this <a href=\"https://argocd-server-argocd.apps.moc-infra.massopen.cloud/applications\">link</a> as shown in the image below:</p>\n<div style=\"text-align:center\">\n<img alt=\"Argo CD UI\" src=\"https://raw.githubusercontent.com/thoth-station/elyra-aidevsecops-tutorial/master/docs/images/ArgoCDUI.png\">\n</div>\n<h4 id=\"using-openshift-cli\" style=\"position:relative;\"><a href=\"#using-openshift-cli\" aria-label=\"using openshift cli permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Using OpenShift CLI</strong></h4>\n<p>Alternatively, you can also deploy your app manually to a cluster using the following OpenShift CLI commands.</p>\n<ol class=\"pf-c-list\">\n<li>Open a terminal in Jupyterlab</li>\n<li>Login from the terminal: <code class=\"language-text\">oc login $CLUSTER_URL</code>.</li>\n<li>Insert your credentials <code class=\"language-text\">USERNAME</code> and <code class=\"language-text\">PASSWORD</code>.</li>\n<li>Make sure you are in <code class=\"language-text\">elyra-aidevsecops-tutorial</code> directory (you can run <code class=\"language-text\">pwd</code> command in the terminal to check your current path).</li>\n<li>Create the Service using: <code class=\"language-text\">oc apply -f ./manifests/base/service.yaml</code>.</li>\n<li>Create the Route using: <code class=\"language-text\">oc apply -f ./manifests/base/route.yaml</code>.</li>\n<li>Create the DeploymentConfig using: <code class=\"language-text\">oc apply -f ./manifests/deploymentconfig.yaml</code>.</li>\n</ol>\n<p>Once your pods deploy your Flask app should be ready to serve inference requests from the exposed Route.</p>\n<h2 id=\"next-steps\" style=\"position:relative;\"><a href=\"#next-steps\" aria-label=\"next steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next Steps</h2>\n<p><a href=\"/operate-first.github.io/docs/source/test-model.md\">Test your deployed inference application</a></p>\n<h2 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>References</h2>\n<ul class=\"pf-c-list\">\n<li><a href=\"https://www.operate-first.cloud/\">Operate First</a></li>\n<li><a href=\"https://argoproj.github.io/argo-cd/\">ArgoCD</a></li>\n<li><a href=\"https://github.com/AICoE/aicoe-ci\">AICoE Pipeline</a></li>\n</ul>","fields":{"srcLink":"https://github.com/thoth-station/elyra-aidevsecops-tutorial/blob/master/docs/source/model-deployment/flask-application.md"},"frontmatter":{"title":"","description":null,"extraClasses":null}}},"pageContext":{"id":"41eab3eb-57c5-5a1b-a1c9-d637da888ba1"}},"staticQueryHashes":["117426894","3000541721","3606484676","533861647"]}